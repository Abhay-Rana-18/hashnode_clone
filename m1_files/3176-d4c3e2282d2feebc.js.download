"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3176],{54871:function(e,n,i){var a,t,r,o,d;i.d(n,{J3:function(){return l},N9:function(){return s},PF:function(){return c},TK:function(){return u},vx:function(){return m}}),function(e){e.AllTime="AllTime",e.Month="Month",e.Week="Week"}(a||(a={})),function(e){e.Grid="grid",e.Magazine="magazine",e.Stacked="stacked"}(t||(t={})),function(e){e.Link="link",e.Page="page",e.Series="series"}(r||(r={})),function(e){e.PublishPost="publish_post",e.WritePost="write_post",e.WriteSeries="write_series"}(o||(o={})),function(e){e.Asc="asc",e.Dsc="dsc"}(d||(d={}));var l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TrendingTags"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"limit_Int_min_1_max_20"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trendingTags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"articlesCount"}},{kind:"Field",name:{kind:"Name",value:"tag"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"}},{kind:"Field",name:{kind:"Name",value:"followersCount"}}]}}]}}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostPublish"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postPublishOptions"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PostPublishInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draftId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ObjectId"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postPublish"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postPublishOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postPublishOptions"}}},{kind:"Argument",name:{kind:"Name",value:"draftId"},value:{kind:"Variable",name:{kind:"Name",value:"draftId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"publication"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"Field",name:{kind:"Name",value:"hashnodeURL"}}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"tagsBulkUpsert"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"tags"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TagCreateInput"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tagsBulkUpsert"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tags"},value:{kind:"Variable",name:{kind:"Name",value:"tags"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ImageUploadURL"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ImageContentType"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageUploadURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentType"},value:{kind:"Variable",name:{kind:"Name",value:"contentType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"fields"}}]}}]}}]},m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadImageByURL"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ImageUrl"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadImageByURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}]}]}}]}},23176:function(e,n,i){i.r(n),i.d(n,{ImageAlignment:function(){return g},getBlurHash:function(){return v},imageReplacer:function(){return f},resizeImage:function(){return p},uploadImage:function(){return b},uploadImageByUrl:function(){return N}});var a=i(59499),t=i(50029),r=i(16835),o=i(87794),d=i.n(o),l=i(54871),u=i(10120),c=i(42029);function s(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,a)}return i}function m(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?s(Object(i),!0).forEach((function(n){(0,a.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var k="https://cdn.hashnode.com/res/hashnode/image/upload/v1659089761812/fsOct5gl6.png?auto=compress,format&format=webp",p=function(e,n,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return i;if("?sz=200"===e)return k;var t=e.replace("hashnode.imgix.net","cdn.hashnode.com");if(-1!==e.indexOf("//res.cloudinary.com/hashnode")&&-1!==e.indexOf("/upload/")){var o=e.split("/upload/"),d=o[1].substring(o[1].lastIndexOf(".")+1);if(-1!==o[1].indexOf("ama_banners")){var l=o[1].substring(1,o[1].indexOf("/")),u=o[1].substring(o[1].indexOf("/")+1,o[1].lastIndexOf("."));t="".concat(o[0],"/upload/").concat(u,"/").concat(l,".").concat(d,"?auto=compress,format&format=webp")}else{var c=o[1].split("/");0===c[0].indexOf("v")&&(c[0]=c[0].substring(1)),t="".concat(o[0],"/upload/").concat(c[1].substring(0,c[1].lastIndexOf(".")),"/").concat(c[0],".").concat(d,"?auto=compress,format&format=webp")}t=t.replace("//res.cloudinary.com","//cdn.hashnode.com/res").replace("http://","https://")}else if(-1!==e.indexOf("//cdn.hashnode.com")&&-1!==e.indexOf("/upload/")){var s=e.split("/upload/");0!==s[1].indexOf("v")&&(t="".concat(s[0],"/upload/").concat(s[1].substring(s[1].indexOf("/")+1)))}if(-1===t.indexOf("//cdn.hashnode.com"))return t;var m="";if(Object.keys(n).forEach((function(e){"w"===e||"h"===e||"mask"===e||"corner-radius"===e?m+="".concat(e,"=").concat(n[e],"&"):"c"===e&&(m+="fit=crop&crop=".concat("face"===n[e]?"faces":"entropy","&"))})),"none"===n.q)return"".concat(t,"?").concat(m);if(-1!==t.indexOf("?")){var p=t.split("?"),f=(0,r.Z)(p,1);t=f[0],m+="&"!==p[1].slice(-1)?"".concat(p[1],"&"):p[1]}var v=-1!==e.indexOf(".gif"),g="auto=format,compress&gif-q=60&format=webm",b="auto=compress&fm=png";return m+=v?a?g:b:"auto=compress,format&format=webp","".concat(t,"?").concat(m)},f=function(e){var n=e.match(/<img src="([^"]+)"/g);if(!n)return e;var i={};return n.forEach((function(e){e=e.split("src=")[1].replace(/"/g,""),i[e]=p(e,{})})),Object.keys(i).forEach((function(n){e=e.replace(n,i[n])})),e},v=function(e){return-1===e.indexOf("?")?"".concat(e,"?fm=blurhash"):"".concat(e,"&fm=blurhash")},g={Center:"center",Left:"left",Right:"right"},b=function(){var e=(0,t.Z)(d().mark((function e(n){var i,a,t,o,s,k,p,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.cM.debug("Uploading image",{file:n}),e.next=4,u.L.query(l.N9,{contentType:n.type},{requestPolicy:"network-only"}).toPromise();case 4:if(i=e.sent,a=i.data,!(t=i.error)){e.next=9;break}throw t;case 9:if(a){e.next=11;break}throw new Error("GraphQL response did not contain data");case 11:return o=a.imageUploadURL,s=o.url,k=o.fields,p=new FormData,Object.entries(m(m({},k),{},{file:n})).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],a=n[1];p.append(i,a)})),e.next=16,fetch(s,{method:"POST",body:p});case 16:if((f=e.sent).ok){e.next=26;break}return e.t0=c.cM,e.t1=f.status,e.next=22,f.text();case 22:throw e.t2=e.sent,e.t3={status:e.t1,bodyText:e.t2},e.t0.error.call(e.t0,"Uploading image to S3 failed",e.t3),new Error("S3 POST request returned non-200 status: ".concat(f.status));case 26:return e.abrupt("return",{image:"https://cdn.hashnode.com/".concat(k.key)});case 29:throw e.prev=29,e.t4=e.catch(0),c.cM.error("Error uploading image",{error:e.t4}),new Error("Error uploading image");case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,t.Z)(d().mark((function e(n){var i,a,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.cM.debug("Uploading image by url",{url:n}),e.next=4,u.L.mutation(l.vx,{url:n}).toPromise();case 4:if(i=e.sent,a=i.data,!(t=i.error)){e.next=9;break}throw t;case 9:if(a){e.next=11;break}throw new Error("GraphQL response did not contain data");case 11:return e.abrupt("return",a.uploadImageByURL);case 14:throw e.prev=14,e.t0=e.catch(0),c.cM.error("Error uploading image by URL",{error:e.t0}),new Error("Error uploading image by URL");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}()}}]);